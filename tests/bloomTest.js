const tape = require('tape')
const Bloom = require('../lib/bloom.js')
tape('test the bloom filter', function (t) {
  t.test('should generate the correct bloom filter value ', function (st) {
    let bloom = new Bloom();
    bloom.add(new Buffer("1d7022f5b17d2f8b695918fb48fa1089c9f85401", "hex"));
    bloom.add(new Buffer("8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925", "hex"));
    bloom.add(new Buffer("0000000000000000000000005409ed021d9299bf6814279a6a1411a7e866a631", "hex"));
    bloom.add(new Buffer("0000000000000000000000001dc4c1cefef38a777b15aa20260a54e584b16c48", "hex"));
    t.equal(
      bloom.bitvector.toString("hex"),
      "00000000000000000000080000800000000000000000000000000000000000000000000000000000000000000000000000000000000004000000080000200000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000010008000000000000000002000000000000000000000000008000000000000"
    );
    t.end();
  })
})
